/*
* vmLightbox() 1.3.5
*
* Copyright 2017
*
* By Dave Carney, https://vehiclemedia.com/
* Minimal image lightbox plugin
* works in all modern browsers including IE 11+
* 
* 	activate with:
* 		$(document).vmLightbox();
*
* 	or overide defaults with:
* 		$(document).vmLightbox({
*			selector: '.example-element a',
*			item_count: true
* 		});
*
*		See full list of default properties in unminified script
*
* 	watches for:
* 		data-target="vm-lightbox" 	(default: add this data-attribute to image links if you don't specify a selector)
* 		data-caption="some caption here"
* 		data-group="group-these-images-together"
*
* 	note: if you change the markup order for the caption or nav links,
* 		you will need to alter the "update" functions so they know where to place a previously non-existent element
*
*/

!function($){$.fn.vmLightbox=function(t){function e(e){function i(){return o}var n=$(e).index(t.selector),o={href:$(e).attr("href"),caption:$(e).data("caption"),prev_index:n-1,next_index:n+1,prev_href:$(document).find(t.selector).eq(n-1).attr("href"),next_href:$(document).find(t.selector).eq(n+1).attr("href"),total_items:$(document).find(t.selector).length};return i}function i(){return'<div class="vm-loading">'+p+"</div>"}function n(t){return t.total_items>1?'<p class="vm-lightbox-image-count"><span>'+t.next_index+"</span> of "+t.total_items+"</p>":""}function o(t){return void 0!==t?r(t):""}function r(t){return'<p class="vm-lightbox-caption">'+t+"</p>"}function l(e){return e.prev_index>=0?a(t.prev_link_class,e.prev_href,t.prev_link_text):""}function c(e){return void 0!==e.next_href?a(t.next_link_class,e.next_href,t.next_link_text):""}function a(t,e,i){return'<a class="vm-lightbox-nav '+t+'" href="'+e+'">'+i+"</a>"}function s(){function t(){$(".vm-lightbox-img").css("max-height",i)}var e=$(".vm-lightbox-container").outerHeight()-$(".vm-lightbox-container").height(),i=$("#vm-lightbox").height()-$(".vm-lightbox-info").outerHeight()-e;t()}function v(t){s();var e=new Image;e.onload=function(){$(".vm-loading").fadeOut(250,function(){$(".vm-lightbox-container").css("background",""),$(".vm-lightbox-img").animate({opacity:1},400)})},e.src=t,$(".vm-lightbox-img").attr("src",e.src)}function f(t){var e=$(".vm-lightbox-caption");if(void 0===t.caption)return e.remove(),"";e.length>0?e.text(t.caption):$(".vm-lightbox-info").append(o(t.caption))}function m(e){var i=$("."+t.prev_link_class),n=$("."+t.next_link_class);e.prev_index>=0?i.length>0?i.attr("href",e.prev_href):n.before(a(t.prev_link_class,e.prev_href,t.prev_link_text)):i.remove()}function x(e){var i=$("."+t.prev_link_class),n=$("."+t.next_link_class);void 0===e.next_href?n.remove():n.length>0?n.attr("href",e.next_href):i.after(a(t.next_link_class,e.next_href,t.next_link_text))}function g(t){function e(){v(t.href)}return $(".vm-lightbox-image-count span").text(t.next_index),m(t),x(t),f(t),e()}var h='<svg id="vm-chevron-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34.62 66.41"><polyline points="33.91 0.71 1.41 33.21 33.91 65.71" style="stroke-miterlimit:10;"/></svg>',p='<svg id="vm-spinner" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 28.26"><circle cx="3.93" cy="14.88" r="3.93" style="fill:#fff"/><circle cx="7.39" cy="7.41" r="3.53" transform="translate(-3.07 6.52) rotate(-45)" style="fill:#fff;opacity:0.875"/><circle cx="15.73" cy="3.08" r="3.08" style="fill:#fff;opacity:0.75"/><circle cx="24.07" cy="7.41" r="2.64" transform="translate(1.81 18.32) rotate(-45)" style="fill:#fff;opacity:0.625"/><circle cx="27.53" cy="14.88" r="2.47" style="fill:#fff;opacity:0.5"/><circle cx="24.07" cy="24.09" r="1.98" transform="translate(-9.98 23.21) rotate(-45)" style="fill:#fff;opacity:0.375"/><circle cx="15.73" cy="26.67" r="1.58" style="fill:#fff;opacity:0.25"/><circle cx="7.39" cy="24.09" r="1.32" transform="translate(-14.87 11.41) rotate(-45)" style="fill:#fff;opacity:0.125"/></svg>';t=$.extend({selector:'a[data-target="vm-lightbox"]',prev_link_class:"prev-nav",prev_link_text:'<span class="vm-chevron-left">'+h+"</span>",next_link_class:"next-nav",next_link_text:'<span class="vm-chevron-right">'+h+"</span>",single:!1,item_count:!1,close_text:'<svg id="vm-close-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 31.41 31.41"><line x1="0.71" y1="0.71" x2="0.71" y2="0.71" style="stroke-miterlimit:10"/><line x1="0.71" y1="0.71" x2="30.71" y2="30.71" style="stroke-miterlimit:10;"/><line x1="30.71" y1="0.71" x2="0.71" y2="30.71" style="stroke-miterlimit:10;"/></svg><span class="sr-only">Close Lightbox</span>'},t),$('*[data-group=""]').removeAttr("data-group"),$('*[data-caption=""]').removeAttr("data-caption");var u=!1;if($("*[data-group]").length>0){u=!0;var d=t.selector}$(window).resize(function(){clearTimeout($.data(this,"resizeTimer")),$.data(this,"resizeTimer",setTimeout(s,500))}),$(document).on("click",t.selector,function(r){r.preventDefault(),$("body").append(i()),u&&($(this).data("group")?t.selector+='[data-group="'+$(this).data("group")+'"]':t.selector+=":not([data-group])");var a=e(this);if(0===$("#vm-lightbox").length){var s='<div id="vm-lightbox" style="opacity: 0;"><div class="vm-lightbox-container" style="background: none;"><div class="vm-lightbox-img-container"><a class="vm-lightbox-close" title="Close">'+t.close_text+'</a><img class="vm-lightbox-img" src="" style="opacity: 0;"></div> <!-- .vm-lightbox-img-container --><div class="vm-lightbox-info">';t.item_count&&(s+=n(a())),t.single||(s+=l(a())+c(a())),s+=o(a().caption),s+="</div> <!-- .vm-lightbox-info --></div></div>",$(s).appendTo("body").fadeTo(250,1,v(a().href))}}),$(document).on("click touchend onpointerup","a.vm-lightbox-nav",function(i){i.preventDefault(),$(".vm-lightbox-container").css("background","none"),$(".vm-lightbox-img").css("opacity","0"),$(".vm-loading").show();var n=$(this).attr("href");g(e($(document).find(t.selector+'[href="'+n+'"]'))())}),$(document).on("click",".vm-lightbox-close",function(){$("#vm-lightbox").fadeOut(250,function(){$(".vm-lightbox-img").attr("src",""),$("#vm-lightbox, .vm-loading").remove()}),u&&(t.selector=d)}),$(document).on("click touchend onpointerup","#vm-lightbox",function(e){e.preventDefault(),["vm-lightbox-img","vm-lightbox-image-count","vm-lightbox-caption"].indexOf($(e.target).attr("class"))>=0||$(e.target).closest("a.vm-lightbox-nav").is(".vm-lightbox-nav")||($("#vm-lightbox").fadeOut(250,function(){$("#vm-lightbox, .vm-loading").remove()}),u&&(t.selector=d))})}}(jQuery);